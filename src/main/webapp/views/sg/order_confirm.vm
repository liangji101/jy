<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"/>

    <link rel="stylesheet" href="../../js/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.css">
    <link rel="stylesheet" href="../../fonts/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../css/app.css">

    <script src="../../js/jquery/dist/jquery.min.js" type="text/javascript"></script>
    <script src="../../js/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.js" type="text/javascript"></script>
    <script src="../../sg/js/ShoppingCart.js" type="text/javascript"></script>
    <script src="../../sg/js/orderAction.js" type="text/javascript"></script>

    <!--for tomcat-->
    <link rel="stylesheet" href="/js/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.css">
    <link rel="stylesheet" href="/fonts/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/app.css">

    <script src="/js/jquery/dist/jquery.min.js" type="text/javascript"></script>
    <script src="/js/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.js" type="text/javascript"></script>
    <script src="/sg/js/ShoppingCart.js" type="text/javascript"></script>
    <script src="/sg/js/orderAction.js" type="text/javascript"></script>

</head>
<body>

<div id="main" role="page">
    <div id="content" data-role="content" class="ui-content">
        <div class="content-container ">
            <div class="shop-container" style="margin-bottom : 60px;">
                <div class="">
                    #if($addressls && ! $addressls.isEmpty())
                    #set($DEFAULT_ADDR = $addressls[0])
                        <div class="addressHint" style="display: inline-block;width: 100%;text-shadow: none;">
                            <div style="float: left">
                                <div>收货地址: $DEFAULT_ADDR.getAddress()</div>
                                <div>联系电话: $DEFAULT_ADDR.getPhone()</div>
                            </div>
                            <div style="float: right;padding-right: 20px;padding-top: 5px;">
                                <div class="swithDefaultAddress" style="color: #ffffff">
                                    <i class="fa fa-chevron-right"></i>
                                </div>
                            </div>
                        </div>
                    #else
                        <div class="js-addAddress" style="border-bottom: solid 1px lightgray">
                            <div class="addNewAddressHint" style="text-shadow:none">
                                您还没有添加收货人信息,请添加
                            </div>
                            <div style="padding: 15px 9px;">
                                <input id="newOrderAddress" type="text" placeholder="收货地址:" value="">
                                <input id="newOrderPhone" type="text" placeholder="联系电话:" value="">
                            </div>
                        </div>
                    #end

                </div>
                <div class="">
                    <div id="shop-product-list">
                        <ul style="margin: 0.0em; padding:0px 9px">
                            #foreach($item in $itemls)
                            <li class="product-item js-product-item" id="$item.id">

                                <input type="hidden" class="js-product-item-id" value="$item.id"
                                       data-value="$item.id"/>

                                <div class="prod_icon" style='background-image: url("$item.pic_url")'>
                                </div>

                                <div>
                                    #if($msg)
                                    <strong>$msg</strong>
                                    #end

                                        <span class="product-title oneline js-product-item-name"
                                              data-value="$item.name">$item.name </span>

                                    #set($itempricemain = $item.price/100)
                                    #set($itempriceleft = $item.price%100)
                                    <div class="prod_info">

                                        <div class="product-price js-product-item-price" data-value="$item.price">
                                            $itempricemain<span>.$itempriceleft</span> 元
                                        </div>

                                        <div class="product_stepper">
                                             <span class="countContainer countContainer-minus">
                                                 <a href="javascript:;"
                                                    class="countChangeAction countChangeActionMinus ">-
                                                 </a>
                                             </span>
                                                <span class="countContainer countContainer-input ">
                                                    <input type="text"
                                                           class="item-quantity countChangeAction countChangeActionSet hidden js-product-item-quantity"
                                                           style="width: 30px;"
                                                           value="$item.count"
                                                           data-value="$item.count">
                                                </span>
                                                <span class="countContainer countContainer-add">
                                                    <a href="javascript:;"
                                                       class="countChangeAction countChangeActionAdd">+
                                                    </a>
                                                </span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            #end

                            <li style="padding: 10px 0px">
                                <input id="orderRemarks" type="text" placeholder="给卖家留言" style="background-color: lightgray">

                                <div style="color: #808080">付款方式:<span>货到付款</span></div>
                            </li>
                        </ul>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="footer" data-role="footer" style="z-index: 100">
        <div class="shop-container">
            <div style="text-align: center;height: 100%; width: 100%; padding: 0em;">
                <form id="orderConfirm" action="../order/save" method="post" data-ajax="false">
                    <fieldset>

                        <input type="hidden" id="order_shop_id" name="shop_id" value="$shop.id"/>
                        <input type="hidden" id="order_items" name="items" value=''/>
                        #if($order_id)
                        <input type="hidden" id="order_id" name="order_id" value="$order_id"/>
                        #end
                        #if($DEFAULT_ADDR)
                        <input type="hidden" id="order_address_id" name="address_id" value="$DEFAULT_ADDR.getId()"/>
                        #end

                        <input type="hidden" id="order_address" name="address" value=""/>
                        <input type="hidden" id="order_phone" name="phone" value=""/>
                        <input type="hidden" id="order_remarks" name="remarks" value=""/>

                        <button id="submit_order" class="sidebar-cart-checkout js-cart-checkout"
                                style="background-color: #F54447; width: 100%; height: 100%;margin: 0em;color: white; border-radius:0;text-shadow: none;">
                            <span class="base-font js-confirm-hit" style="font-size: 18px;font-weight: 100">确定</span>
                            <span class="base-font"> <br>
                            总计: <span
                                    id="js-shop-total-count"
                                    class="js-shop-total-count base-font">0</span> 件</span>
                            ￥<span id="js-shop-total-price" class="js-shop-total-price base-font">0</span>
                        </button>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
</div>
</body>
</html>