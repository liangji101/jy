package com.renren.ntc.video.utils;


import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;
import org.apache.commons.lang.StringUtils;

import java.util.HashMap;
import java.util.Map;


/**
 * Feed工具类
 * .
 */
public class FeedJsonUtil {


    public static String mapToJson(Map<String, Object> data) {
        if (data == null || data.isEmpty()) {
            return "";
        }

        //如果是sns类型的新鲜事，则转为Json数据
        JSONObject jsonObject = new JSONObject();
        for (Map.Entry<String, Object> entry : data.entrySet()) {
            String key = entry.getKey();
            Object value = entry.getValue();
            if (value instanceof Object && !(value instanceof String))
                throw new IllegalArgumentException("只能是基本类型和字符串");
            jsonObject.put(key, value);
        }
        return jsonObject.toString();
    }

    /**
     * 将JSON形式的feed内容转换成Map
     *
     * @param jsonContent
     * @return
     */
    public static Map jsonToMap(String jsonContent) {
        if (StringUtils.isNotBlank(jsonContent)) {
            Map<String, Object> data = new HashMap<String, Object>();
            JSONObject object;
            try {
                object = JSON.parseObject(jsonContent);
            } catch (Exception e) {
                //gger.error("jsonContent转换错误:" + ",source content:" +  jsonContent);
               return null;
            }
            if (object != null) {
                for (String key : object.keySet()) {
                    data.put(key, object.get(key));
                }
            }
            return data;
        } else {
            return null;
        }
    }

    private FeedJsonUtil() {
    }
}
